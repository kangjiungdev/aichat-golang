<div class="chat-grid">
  <%= for (chat) in chats { %>
    <%= if (chat.UserID == user.ID) { %>
      <%= for (character) in characters { %>
        <%= if (character.ID == chat.CharacterID) { %>
          <div class="chat-card">
            <img src="/<%= character.CharacterAssets[0] %>" alt="<%= character.CharacterName %>" class="chat-img" data-chat-id="<%= chat.ID %>" data-img='<%= toJSON(character.CharacterAssets) %>'>
            <div class="chat-body">
              <div class="chat-header">
                <h4><%= character.CharacterName %></h4>
                <div class="chat-icons">
                  <span>ğŸ’¬ <%= len(chat.UserMessage) %></span>
                  <span>ğŸ¤</span>
                </div>
              </div>
              <p class="chat-preview">
                <%= character.CharacterOnelineInfo %>
              </p>
              <div class="chat-buttons">
                <button>ìºë¦­í„° ì •ë³´</button>
                <button onclick="location.href='/chat/<%= chat.ID %>'">ëŒ€í™” ì‹œì‘</button>
                <button class="delete-chat" value="<%= chat.ID %>">ëŒ€í™” ì‚­ì œ</button>
              </div>
              <div class="chat-footer">
                <span><%= chat.UpdatedAt.Format("2006-01-02 15:04") %></span>
                <span class="chat-footer-username" data-chat-id="<%= chat.ID %>"><%= user.Name %></span>
              </div>
            </div>
          </div>
        <% } %>
      <% } %>
    <% } %>
  <% } %>
</div>